## 오늘 한 일
- **평점은 1~5까지 숫자 중 랜덤한 정수 만들기**
```javascript
const [rate, setRate] = useState(Array.from({length : 7}, (value) => value = Math.floor(Math.random() * 5) + 1));
```
1. 랜덤 정수 얻기
> Math.random() :  0부터 1사이의 값이 소숫점이 붙어서 무작위로 출력
 Math.random() * 최대값 : 최대값 지정
 Math.floor() : 주어진 숫자와 같거나 더 작은 정수중에서 가장 큰 값을 반환 

```javascript
Math.random() * 5) + 1 // 해당 수식에 + 1을 더하면 난수의 생성 범위는 1 ~ 5
```

2. 랜덤 정수 배열로 만들어 주기
> Array.from(arrayLike[, mapFn[, thisArg]]) : 유사 배열 객체(array-like object)나 반복 가능한 객체(iterable object)를 얕게 복사해 새로운 Array 객체를 만듬 특히, **특정 길이의 배열을 만들어 연속된 수를 넣을 수도 있다.**

```javascript
Array.from({length : 7}, (value) => value = Math.floor(Math.random() * 4) + 1) // 랜덤 정수를 배열 길이가 7인 배열로 넣어줌 (일~월) 
```

3. useState 선언한 이유?
reset 버튼을 누르면 상태값이 0으로 변해야 하기 때문에

4. Main.js에 선언한 이유?
Main과 Main의 하위 컴포넌트인 Scroe만 사용하기 때문에

- **각 요일 옆 삼각형 버튼을 누르면 요일 평점 남기기 페이지로 이동하기**
```javascript
const week = props.week; // 부모 컴포넌트 App.js에서 받아옴
const history = useHistory();

return (
        <Container>
            <Title >내 일주일은?</Title>
          <div>
            {week.map((week, index) => {
        return ( 
            
            <Rate key={index}> {week} // 메인 페이지에 일요일부터 토요일까지 나와야 하기 때문에 map()으로 모든 요소를 출력 하도록 만듬 {week} 
			<button onClick={ () => {
               history.push("/detail/" + index);  // detail 페이지로 이동 -> index를 URL파라미터를 보냄 (무슨 요일 페이지인지 알기 위해서)
            }}>  PUSH 
              </button> 
			</Rate>
		 )})}
          </div>
```
-  **useHistory()**
원래 history 객체를 사용하기 위해서는 withRouter 를 사용하여 match, location 과 함께 사용 할 수 있게끔 했었다.
react-router-dom 버전이 5.1 이상으로 올라오면서 **useHistory** 를 이용하여 history 객체를 사용 할 수 있게끔 바뀌었다.
**BrowserRouter** 를 사용하면서 history 객체가 필요하다면 바로 import 하여 사용하면 되는 것.

 **history.push()**
해당 요소를 클릭하는 경우 **지정한 path 값에 해당하는 주소로 이동**한다.
주로 메인페이지가 아닌 페이지에서 **다른 페이지로 넘어가기 위한 버튼을 만들 때 사용**한다.

---------------------------
- **선택한 요일 보여주기**
- **남기기 버튼을 누르면 이전 페이지로 이동하기**
```javascript
import { useParams, useHistory } from "react-router-dom";

const Detail = (props) => {
	const { id } = useParams();
  	const history = useHistory();
  	const onClick = () => {
        history.push('/')
    } 
    
  return (
        <div>
            <h3>{week[id]}요일 평점 남기기</h3>
			<button onClick={onClick}>평점 남기기</button>
		</div>
```
**const { id } = useParams();**
오늘 여기서 두번째로 오래 걸렸다. useParams()를 사용해서 URL파라미터 값을 변수에 저장할 때 중괄호를 반드시 쓰는데 나는 const { index } = useParams()를 사용하면 값이 undefined가 나오고 중괄호 빼고 const index = useParams()를 쓰면 또 값은 object로 잘 나온다. 대체 왜 그런지 계속했지만 답을 얻지 못했다. 결국 기술 매니저님의 도움을 받았다.
**구조 분해 할당** : **배열이나 객체의 속성을 해체하여 그 값을 개별 변수에 담을 수 있게 하는 JavaScript 표현식**
```javascript
let a, b, rest;
[a, b] = [10, 20];
console.log(a); // 10
console.log(b); // 20

[a, b, ...rest] = [10, 20, 30, 40, 50];
console.log(rest); // [30,40,50]
```
index라고 변수를 선언해서 계속 값이 나오지 않았던 것이였다. object의 값은 id : '0'으로 들어가 있었는데 엉뚱한걸 자꾸 불른거다. index를 사용하고 싶으면
const { id : index } = useParams()를 사용하면 된다.

---------------------------

- **각 요일별 랜덤 정수로 구성된 점수의 평균을 구하기**

```javascript
const [rate, setRate] = useState(Array.from({length : 7}, (value) => value = Math.floor(Math.random() * 4) + 1));

const rateAverage = rate => {
      if(rate.length === 0) return 0;
      const sum = rate.reduce((a,b) => a+b) / rate.length; // 평균 값
      return sum.toFixed(1); // 소수 첫번째 자리 까지 return
    }
```
> numObj.toFixed([소수 부분의 자릿수]) : 매개변수 - 소수점 뒤에 나타날 자릿수
Array.prototype.reduce() : 배열의 각 요소에 대해 주어진 리듀서(reducer) 함수를 실행하고, 하나의 결과값을 반환


- **Reset 버튼을 누르면 평점 평균을 0으로 상태변화 시키기**
```javascript
const [rate, setRate] = useState(Array.from({length : 7}, (value) => value = Math.floor(Math.random() * 4) + 1));

 const removeRate = () => {
      setRate(rate.filter((x) => x === 0));
    }
```
오늘 여기서 제일 오래 걸렸다. 상태변화를 어떻게 시켜야할지 단순하게 생각하다가 나는 평균 값을 0으로 바꾸자고 생각했다. 근데 setRate는 rate라는 상태값을 변화시키는 함수이기때문에 내가 만든 평균값을 바꾸는건 할 수 없었다. 그러면 rate를 0으로 만들어자! 제일 먼저 한일은 setRate(rate.length === 0) 계속 console.log 오류가 떴다. 화면이 보이질 않는다. 이렇게만 계속 반복하다가 오류를 천천히 다시 읽어봤다. rate의 typeError라는게 계속 보였다. 아, rates는 배열이지? 배열 모든 값에 0을 넣어볼까?
배열의 값을 전부 바꿀 수 있는 함수를 찾아보다가 filter() 함수를 발견 했다.

**Array.prototype.filter()** : **주어진 함수의 테스트를 통과하는 모든 요소를 모아 새로운 배열로 반환** 

filter()안에 모든 요소를 0으로 만들어주는 함수를 만들었다. 그래서 결국엔 Reset버튼을 누르면 0이 나오는 기적을 발견했다.. 무려 3~4시간이 걸린 것 같다.. 너무 단순해서 힘이 빠지지만 결과는 나와서 기쁘다.

- **Scroe 컴포넌트로 이동시키기**
```javascript
<Score rateAverage={rateAverage(rate)} removeRate={removeRate}  />
```
```javascript
import React from "react";
import styled from "styled-components";

const Score = (props) => {
    const {rateAverage, removeRate} = props;
    return (
        <div>
            <h3>평균 평점</h3>
            <p>{rateAverage}</p>
            <button onClick={removeRate}>Reset</button>
        </div>    
    )
}

export default Score;
```

## 오늘 느낀점
컴포넌트마다 구현해야할 기능들이 뭔지 다 적어봤다. 그러고 하나하나씩 해결해 나가는 방향으로 코딩을 했다. 그랬더니 생각보다 많은 것들을 빨리 구현했다. 예를 들면 랜덤정수를 구해야한다면 랜덤 수를 반환하는 함수가 있는가? 또 랜덤수를 정수로 만들 함수가 있는가? 이렇게 차근차근 하나씩 하다보면 방법도 터득하고 구글링 하는 것도 쉬워진다. 아직은 갈길이 먼 개발 취준생이지만 그래도 오늘 내 자신에게 칭찬해주고 싶다. 포기하지 않고 계속 어떻게 해야하는지 생각한 것부터, 이것도 해볼까? 저것도 해볼까? 하면서 여러가지 방법을 시도한 것, 구글링 열심히 한것, 오류를 발견한것, 등등 아직 제일 중요한 랜덤 정수 수만큼 동그라미를 색칠하는 것과, 클릭하면 클릭한 만큼 색칠하는 것 이 두개가 제일 고민이고 난제이지만 오늘도 잘 해냈듯이 내일도 잘 해결해나가길 바란다.